<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>scrartcl • komadown</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">komadown</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/scrartcl.html">scrartcl</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jolars/komadown">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>scrartcl</h1>
            <h3 class="subtitle">KOMA-script articles with komadown</h3>
                        <h4 class="author">Johan Larsson</h4>
                        
            <h4 class="date">2017-08-21</h4>
          </div>

    
    
<div class="contents">
<div id="motivation" class="section level1">
<h1 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h1>
<p>The default  template for <a href="http://rmarkdown.rstudio.com/">R Markdown</a> and, by proxy, <strong>pandoc</strong> take liberties with the original design of  documents. The title page is compressed, margins are minimized, and first-line indentation is usurped by paragraph spacing. This makes sense for markdown documents that are intended for several output formats since consistency between those are important to uphold. From a typographical standpoint, however, the design leaves much to desire.</p>
<p>Without delving into the details of this, I think it suffices to say that the design of  documents have been wrought with care and should only be meddled with if one knows what they are doing.</p>
<p>This, coincidently, is the case with the <a href="https://komascript.de/">KOMA-Script bundle</a>, which is a reimagining of the original  classes article, book, letter, and book. In many ways, the KOMA-Script classes are incontrovertible upgrades to the original classes, adding a significant deal of functionality to boot.</p>
<p>In addition to this, <strong>komadown</strong> pulls in a small set of other packages to handle the different needs that KOMA-Script does not cover. All in all, the package interface introduces</p>
<ul>
<li>an interface to <code>\KOMAoptions</code>, which makes the majority of KOMA-Script accessible to the user,</li>
<li>automatic or manual headers and footers using yaml metadata,</li>
<li>caption customization via the <strong>caption</strong> package,</li>
<li>author and affiliation setups via the <strong>authblk</strong> package, and</li>
<li>font combinations with excellent support for math (mostly using the <strong>newtx</strong> package).</li>
</ul>
<p>In addition to this, <strong>komadown</strong> also leans on the <a href="https://bookdown.org/">bookdown</a> package to provide support for cross-references of tables, figures, theorems, sections, and equations in R Markdown syntax.</p>
<p>My minor role in this is to provide a  template for <strong>pandoc</strong> and interface for <strong>R</strong> to make it easier for R users to draw on the power of KOMA-Script (and friends).</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Install <strong>komadown</strong> by running <code>install.packages("komadown")</code>. If you are running RStudio, this will set you up to begin a KOMA-Script article with <strong>komadown</strong>’s default template (which this document is based on) simply by going <code>File -&gt; New File -&gt; R Markdown</code> and picking the <em>scrartcl</em> template. The code that makes this work is borrowed from <a href="https://CRAN.R-project.org/package=rticles">rticles</a>.</p>
<p>Besides installing the package, the only other necessary step is to include</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">output:</span><span class="at"> komadown::scrartcl</span>
<span class="ot">---</span></code></pre></div>
<p>somewhere in the metadata. This will eventually call <code>pdf_document2()</code> from <strong>bookdown</strong> and then  a <code>.tex</code> document, producing <code>PDF</code> output.</p>
</div>
<div id="settings" class="section level1">
<h1 class="hasAnchor">
<a href="#settings" class="anchor"></a>Settings</h1>
<p>Most of the settings for <strong>KOMA-Script</strong> are called using a metadata block called <code>KOMAoptions</code>, which takes items in the <code>element=value</code> form. For instance, this document uses this option to switch headings to versions similar to the standard classes using</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">KOMAoptions:</span>
  <span class="kw">-</span> headings=standardclasses
<span class="ot">---</span></code></pre></div>
<p>The reader is referred to the <strong>KOMA-script</strong> manual for information on the many options available. Of special interest may be the <code>DIV</code> argument – which we will talk about next.</p>
<div id="type-area-calculations" class="section level2">
<h2 class="hasAnchor">
<a href="#type-area-calculations" class="anchor"></a>Type area calculations</h2>
<p>One of the strengths of <strong>KOMA-Script</strong> is its facilities for intelligently computing type-area layouts. The core  classes work well out-of-the-box if the default font options (size, family, line spread) are used. However, if the user wants to forego Latin/Computer Modern for another font family or simply change its size, these settings no longer fullfill their purpose of keeping the text at an adequate number of words per line.</p>
<p>The core classes solution to this is to use the <strong>geometry</strong> package and modify the margins manually, but this might take several attempts to get right and moreover requires that the user knows to get the proportions right.</p>
<p><strong>KOMA-Script</strong> solves this automatically using an algorithm. This involes the <code>DIV=x</code> setting, which is implemented in <strong>komadown</strong> via the metadata block <code>classoption</code>. The simplest use of <code>DIV</code> is to set it to <code>default</code>.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">classoption:</span>
  <span class="kw">-</span> DIV=calc
<span class="ot">---</span></code></pre></div>
<p>This uses a predefined table based on the paper size and default font to arrive at a type area.</p>
<p>A more advanced use of <code>DIV</code> might be to set it to <code>calc</code>, in which case a <code>DIV</code> size is calculated based on the other options given KOMA-Script, such as <code>BCOR</code> (binding correction). <code>calc</code> also bases its calculations on the current font settings, but because the calculations are performed at the time when the document class is loaded and hence <em>before</em> any font packages are included, it does not make sense to set <code>DIV</code> for this reason alone. To get around this, one can use the <code>KOMAoptions</code> block. <code>KOMAoptions</code> are called after font packages are loaded, and hence if the user specifies <code>DIV=last</code> (if <code>DIV=calc</code> was set in <code>classoption</code>) or <code>DIV=calc</code> here, it will successfully adapt the type area.</p>
</div>
<div id="headers-and-footers" class="section level2">
<h2 class="hasAnchor">
<a href="#headers-and-footers" class="anchor"></a>Headers and footers</h2>
<p>Headers and footers can be specified via the following syntax.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">header:</span>
  <span class="kw">-</span> <span class="fu">pos:</span><span class="at"> r</span>
    <span class="fu">first:</span><span class="at"> </span><span class="st">"scrartcl"</span>
    <span class="fu">next:</span><span class="at"> </span><span class="st">"komadown"</span>
<span class="fu">footers:</span>
  <span class="kw">-</span> <span class="fu">pos:</span><span class="at"> l</span>
    <span class="fu">next:</span><span class="at"> </span><span class="st">"\today"</span>
<span class="ot">---</span></code></pre></div>
<p><code>pos</code> gives alignment of the header—one of <code>r</code>, <code>l</code>, and <code>c</code> for right, left, and center respectively. <code>first</code> is the text for the header or footer on the first page and <code>next</code> for the latter pages. First and next are optional but pos is <em>not</em>.</p>
<p>Additionally, the user can set</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">automark:</span><span class="at"> yes</span>
<span class="ot">---</span></code></pre></div>
<p>which will then create a running header displaying the current section in the left spot of the header (which is the setting used in this vignette).</p>
</div>
<div id="captions" class="section level2">
<h2 class="hasAnchor">
<a href="#captions" class="anchor"></a>Captions</h2>
<p>Captions can be customized using the <code>caption</code> metadata block.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">caption:</span>
  <span class="kw">-</span> <span class="fu">labelfont:</span><span class="at"> bf</span>
  <span class="kw">-</span> <span class="fu">labelsep:</span><span class="at"> period</span>
  <span class="kw">-</span> <span class="fu">font:</span><span class="at"> small</span>
<span class="ot">---</span></code></pre></div>
<p>The reader is referred to documentation for the <a href="http://ftp.acc.umu.se/mirror/CTAN/macros/latex/contrib/caption/caption-eng.pdf">caption package</a> to read about the various settings.</p>
<p>The default settings (the ones above) produce captions with bold face for the label and a dot separator (Figure @ref(fig:histogram)).</p>
<div class="figure">
<img src="scrartcl_files/figure-html/histogram-1.pdf" alt="A plot with the default caption settings." width="288"><p class="caption">
A plot with the default caption settings.
</p>
</div>
<p>Additionally, we call the <strong>floatrow</strong> package to setup table floats to place their captions <em>above</em> the floats. Settings from this package are currently not configurable.</p>
</div>
</div>
<div id="cross-references" class="section level1">
<h1 class="hasAnchor">
<a href="#cross-references" class="anchor"></a>Cross-references</h1>
<p>Cross-references are available in markdown syntax via the <strong>bookdown</strong> package. The basic syntax is <code>\@ref(label)</code> where <code>label</code> will differ depending on context:</p>
<dl>
<dt>Figures</dt>
<dd>
<code>label</code> will be <code>fig:id</code> where <code>id</code> is the label given the chunk the figure is produced by. Note that this requires the <code>fig.cap</code> argument to be set or else there won’t be a <code>\figure</code> environment to attach the label to.
</dd>
<dt>Sections</dt>
<dd>Add <code>{#id}</code> to the end of the section name and you can reference it with <code>\@ref(id)</code>.
</dd>
<dt>Equations</dt>
<dd>Add <code>(\#eq:id)</code> inside the math environment and you will be able to refer to it by <code>\@ref(eq:id)</code>
</dd>
<dt>Theorems</dt>
<dd>Add <code>label="id"</code> to the theorem chunk and you will be able to refer to it by <code>\@ref(prefix:id)</code> where prefix depends on the type of theorem. See <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#tab:theorem-envs">this table</a> for a description of the various prefixes.
</dd>
</dl>
</div>
<div id="font-packages" class="section level1">
<h1 class="hasAnchor">
<a href="#font-packages" class="anchor"></a>Font packages</h1>
<p><strong>komadown</strong> includes a few font packs that consist of font combinations (serif, sans-serif, and monospace). All are based on the tremendous  package <a href="https://www.ctan.org/pkg/newtx">newtx</a> from Michael Sharpe. They are accessed with the metadata option <code>fontpack-x</code>, <code>x</code> being one of the options in Table @ref(tab:fontpack).</p>
<table class="table">
<caption>(#tab:fontpack) Customized fontpackages</caption>
<thead><tr class="header">
<th align="left">Font pack</th>
<th align="left">Serif</th>
<th align="left">Sans-serif</th>
<th align="left">Monospace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">charter</td>
<td align="left">XCharter (Charter)</td>
<td align="left">Cabin</td>
<td align="left">Inconsolata</td>
</tr>
<tr class="even">
<td align="left">erewhon</td>
<td align="left">Erewhon (utopia)</td>
<td align="left">Cabin</td>
<td align="left">Inconsolata</td>
</tr>
<tr class="odd">
<td align="left">libertine</td>
<td align="left">Libertine</td>
<td align="left">Biolinum</td>
<td align="left">Inconsolata</td>
</tr>
<tr class="even">
<td align="left">times<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>
</td>
<td align="left">Times New Roman</td>
<td align="left">Helvetica</td>
<td align="left">newtxtt</td>
</tr>
</tbody>
</table>
<p>Hence, to use the erewhon font pack, you would need to set the following.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">fontpack-erewhon:</span><span class="at"> yes</span>
<span class="ot">---</span></code></pre></div>
<p>If no font package is specified, the default is set to Latin Modern.</p>
</div>
<div id="font-settings" class="section level1">
<h1 class="hasAnchor">
<a href="#font-settings" class="anchor"></a>Font settings</h1>
<p>All of the font settings can be set or modified with the metadata blocks <code>addtokomafont</code> and <code>setkomafont</code>; the former modifies the current options – the latter resets them. Both use the subitems <code>element</code> and <code>commands</code>. This document, for instance, using the following settings to modify description lists to use a roman font instead of the <strong>KOMA-Script</strong> default of sans-serif.</p>
<pre><code>---
setkomafont:
  - element: descriptionlabel
    commands: \normalfont\scshape\bfseries
---</code></pre>
<p>As always, please refer to the <strong>KOMA-Script</strong> manual for a thorough take on this.</p>
</div>
<div id="bibliography-style" class="section level1">
<h1 class="hasAnchor">
<a href="#bibliography-style" class="anchor"></a>Bibliography style</h1>
<p>The default bibliography style is the vancouver <span class="citation">(Patrias 2007)</span> style. It can be replaced with any <code>.csl</code> style using the usual <strong>pandoc</strong> interface.</p>
</div>
<div id="author-blocks" class="section level1">
<h1 class="hasAnchor">
<a href="#author-blocks" class="anchor"></a>Author blocks</h1>
<p>The komadown template includes scripting for author blocks as well; in fact, you <em>must</em> use the author blocks. The settings are somewhat involved compared to the usual author calls.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">author:</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"Johan Larsson"</span>
<span class="fu">affil:</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"Lund Unviversity"</span></code></pre></div>
<p><code>affil</code> is, of course, optional. We use the <strong>authblk</strong> package for this. If you have several authors you use the <code>id</code> tag to match authors to their affiliations.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">author:</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"Johan Larsson"</span>
    <span class="fu">id:</span><span class="at"> 1</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"John Doe"</span>
    <span class="fu">id:</span><span class="at"> 1</span>
<span class="fu">affil:</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"Lund University"</span>
    <span class="fu">id:</span><span class="at"> 1</span></code></pre></div>
<p>and the authors will link up with the affiliation.</p>
</div>
<div id="design-choices" class="section level1">
<h1 class="hasAnchor">
<a href="#design-choices" class="anchor"></a>Design choices</h1>
<p>I’ve attempted to leave most of the design choices at their default values, putting most of my personal preferences in the default template instead in order to make them easy to shake off. However, there are a few things that I have opted to modify. They are</p>
<ul>
<li>table captions are always placed on top,</li>
<li>
<code>number_sections</code> in the call to <code><a href="http://www.rdocumentation.org/packages/rmarkdown/topics/pdf_document">rmarkdown::pdf_document()</a></code> is set to <code>TRUE</code> by default, and</li>
<li>the default bibliography style is set to the <em>Uniform Requirements</em> style (also known as Vancouver).</li>
</ul>
</div>
<div id="this-document" class="section level1">
<h1 class="hasAnchor">
<a href="#this-document" class="anchor"></a>This document</h1>
<p>This document uses the following YAML metadata setup.</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="ot">---</span>
<span class="fu">title:</span><span class="at"> </span><span class="st">"scrartcl"</span>
<span class="fu">subtitle:</span><span class="at"> </span><span class="st">"KOMA-script articles with komadown"</span>
<span class="fu">author:</span>
  <span class="kw">-</span> <span class="fu">name:</span><span class="at"> </span><span class="st">"Johan Larsson"</span>
    <span class="fu">affil:</span><span class="at"> </span><span class="st">"Lund University"</span>
<span class="fu">date:</span><span class="at"> </span><span class="st">"2017-08-21"</span>
<span class="fu">automark:</span><span class="at"> yes</span>
<span class="fu">colorlinks:</span><span class="at"> yes</span>
<span class="fu">fontpack-libertine:</span><span class="at"> yes</span>
<span class="fu">classoption:</span>
  <span class="kw">-</span> DIV=calc
  <span class="kw">-</span> headsepline=true
<span class="fu">header:</span>
  <span class="kw">-</span> <span class="fu">pos:</span><span class="at"> ro</span>
    <span class="fu">next:</span><span class="at"> komadown</span>
<span class="fu">caption:</span>
  <span class="kw">-</span> labelfont=bf
  <span class="kw">-</span> labelsep=period
  <span class="kw">-</span> font=small
<span class="fu">setkomafont:</span>
  <span class="kw">-</span> <span class="fu">element:</span><span class="at"> descriptionlabel</span>
    <span class="fu">commands:</span><span class="at"> \normalfont\scshape\bfseries</span>
<span class="fu">KOMAoptions:</span>
  <span class="kw">-</span> headings=standardclasses
  <span class="kw">-</span> DIV=last
<span class="fu">output:</span><span class="at"> komadown::scrartcl</span>
<span class="ot">---</span></code></pre></div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-patrias_2007">
<p>Patrias, Karen. 2007. <em>Citing Medicine</em>. 2nd ed. National Library of Medicine. <a href="https://www.ncbi.nlm.nih.gov/books/NBK7262/" class="uri">https://www.ncbi.nlm.nih.gov/books/NBK7262/</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>There is currently an issue using <strong>authblk</strong> (which <strong>komadown</strong> uses to set up title blocks) together with <strong>newtxtext</strong> that causes superscripts for the author footnotes to be malformed.<a href="#fnref1">↩</a></p></li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#motivation">Motivation</a></li>
      <li><a href="#installation">Installation</a></li>
      <li>
<a href="#settings">Settings</a><ul class="nav nav-pills nav-stacked">
<li><a href="#type-area-calculations">Type area calculations</a></li>
      <li><a href="#headers-and-footers">Headers and footers</a></li>
      <li><a href="#captions">Captions</a></li>
      </ul>
</li>
      <li><a href="#cross-references">Cross-references</a></li>
      <li><a href="#font-packages">Font packages</a></li>
      <li><a href="#font-settings">Font settings</a></li>
      <li><a href="#bibliography-style">Bibliography style</a></li>
      <li><a href="#author-blocks">Author blocks</a></li>
      <li><a href="#design-choices">Design choices</a></li>
      <li><a href="#this-document">This document</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Johan Larsson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
